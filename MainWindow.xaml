<Window x:Class="SpeedCubeTimer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:oxy="http://oxyplot.org/wpf"
        Title="Speed Cube Timer" Height="800" Width="1200"
        WindowStartupLocation="CenterScreen"
        Background="#1a1a1a">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="400"/>
        </Grid.ColumnDefinitions>
        
        <!-- Top Header -->
        <Border Grid.Row="0" Grid.ColumnSpan="2" BorderBrush="#333333" BorderThickness="0,0,0,1" Background="#262626" Padding="20">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <TextBlock Text="⏱ Speed Cube Timer" 
                           FontSize="24" 
                           FontWeight="Bold"
                           Foreground="#1976D2"
                           VerticalAlignment="Center"/>
                <TextBlock Name="StatusText"
                           Text="Press SPACE to start"
                           FontSize="14"
                           Foreground="#888888"
                           TextAlignment="Center"
                           Margin="40,0,0,0"
                           VerticalAlignment="Center"
                           FontStyle="Italic"/>
            </StackPanel>
        </Border>

        <!-- Main Center Area: Timer + Controls -->
        <StackPanel Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="40">
            
            <!-- Timer Display - Large and Central -->
            <Border BorderBrush="#404040" BorderThickness="3" CornerRadius="12" Padding="40" Margin="0,0,0,40" Background="#262626" Width="500" Height="280">
                <StackPanel VerticalAlignment="Center">
                    <TextBlock Name="TimerDisplay" 
                               Text="00:00.00" 
                               FontSize="100" 
                               FontWeight="Bold"
                               Foreground="#1976D2"
                               TextAlignment="Center"
                               FontFamily="Courier New"
                               LineHeight="Auto"/>
                </StackPanel>
            </Border>

            <!-- Control Buttons -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,40">
                <Button Name="StartButton" 
                        Content="▶ Start" 
                        Width="120" Height="50"
                        FontSize="14"
                        Click="StartButton_Click"
                        Background="#4CAF50"
                        Foreground="White"
                        FontWeight="Bold"
                        Cursor="Hand"
                        Margin="5,0"/>
                <Button Name="StopButton" 
                        Content="⏹ Stop" 
                        Width="120" Height="50"
                        FontSize="14"
                        Click="StopButton_Click"
                        Background="#f44336"
                        Foreground="White"
                        IsEnabled="False"
                        FontWeight="Bold"
                        Cursor="Hand"
                        Margin="5,0"/>
                <Button Name="ResetButton" 
                        Content="↺ Reset" 
                        Width="120" Height="50"
                        FontSize="14"
                        Click="ResetButton_Click"
                        Background="#2196F3"
                        Foreground="White"
                        FontWeight="Bold"
                        Cursor="Hand"
                        Margin="5,0"/>
            </StackPanel>

            <!-- Statistics -->
            <Border BorderBrush="#404040" BorderThickness="1" CornerRadius="8" Padding="20" Background="#262626" Width="380">
                <StackPanel>
                    <TextBlock Text="Session Statistics" 
                               FontSize="12" 
                               FontWeight="Bold"
                               Foreground="#AAAAAA"
                               Margin="0,0,0,15"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0" HorizontalAlignment="Center">
                            <TextBlock Text="Best" FontSize="11" Foreground="#888888" TextAlignment="Center" Margin="0,0,0,6"/>
                            <TextBlock Name="BestTimeText" Text="--:--" FontSize="16" FontWeight="Bold" Foreground="#1976D2" TextAlignment="Center"/>
                        </StackPanel>
                        <StackPanel Grid.Column="1" HorizontalAlignment="Center">
                            <TextBlock Text="Average" FontSize="11" Foreground="#888888" TextAlignment="Center" Margin="0,0,0,6"/>
                            <TextBlock Name="AverageTimeText" Text="--:--" FontSize="16" FontWeight="Bold" Foreground="#FF9800" TextAlignment="Center"/>
                        </StackPanel>
                        <StackPanel Grid.Column="2" HorizontalAlignment="Center">
                            <TextBlock Text="Worst" FontSize="11" Foreground="#888888" TextAlignment="Center" Margin="0,0,0,6"/>
                            <TextBlock Name="WorstTimeText" Text="--:--" FontSize="16" FontWeight="Bold" Foreground="#f44336" TextAlignment="Center"/>
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </Border>
        </StackPanel>

        <!-- Right Sidebar: History + Plot -->
        <Border Grid.Row="1" Grid.Column="1" BorderBrush="#333333" BorderThickness="1,0,0,0" Background="#1a1a1a">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="20">
                    
                    <!-- Solve History -->
                    <TextBlock Text="Solve History" 
                               FontSize="13" 
                               FontWeight="Bold"
                               Foreground="#FFFFFF"
                               Margin="0,0,0,12"/>
                    <Border BorderBrush="#404040" BorderThickness="1" CornerRadius="6" Padding="10" Margin="0,0,0,20" Background="#262626">
                        <StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                <TextBlock Text="Solves:" FontSize="11" Foreground="#AAAAAA" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                <Button Name="DeleteButton" 
                                        Content="✕ Delete" 
                                        Width="75" Height="26"
                                        FontSize="10"
                                        Click="DeleteButton_Click"
                                        Background="#f44336"
                                        Foreground="White"
                                        FontWeight="Bold"
                                        Cursor="Hand"/>
                            </StackPanel>
                            <ListBox Name="TimesListBox" 
                                     Background="#1a1a1a"
                                     Foreground="#FFFFFF"
                                     Height="120"
                                     SelectionChanged="TimesListBox_SelectionChanged"
                                     BorderBrush="#404040"
                                     BorderThickness="1"
                                     Padding="8"/>
                        </StackPanel>
                    </Border>

                    <!-- Trend Plot -->
                    <TextBlock Text="Performance Trend" 
                               FontSize="13" 
                               FontWeight="Bold"
                               Foreground="#FFFFFF"
                               Margin="0,0,0,12"/>
                    <oxy:PlotView Name="TrendPlot" 
                                  Model="{Binding PlotModel}"
                                  Margin="0"
                                  Height="400"
                                  Background="#262626"
                                  PreviewMouseDown="TrendPlot_PreviewMouseDown"
                                  PreviewMouseMove="TrendPlot_PreviewMouseMove"/>
                </StackPanel>
            </ScrollViewer>
        </Border>
    </Grid>
</Window>
